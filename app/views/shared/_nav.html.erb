<nav class="navbar navbar-light bg-primary justify-content-between py-3">
  <!-- Logo or Branding -->
  <span class="navbar-brand ms-4">
    <%= link_to 'Ekaart App', home_users_path, class: "text-decoration-none text-white" %>
  </span>
  
  <!-- Navbar Content: Links and User Info -->
  <div class="d-flex align-items-center rounded-pill">
     <%= form_tag root_path, method: :get, html: {class: "rounded-pill"} do %>
    <div class="input-group bg-white">
      <%= text_field_tag :search, params[:search], placeholder: "Search for products", class: "form-control border-0", name: "search" %>
      
        <button class="btn btn-outline-success border-0" type="submit">
          Search
        </button>
    
    </div>
  <% end %> 

    <% if user_signed_in? %>
      <!-- Display Welcome Message -->
      <span class="px-3 fs-6 fw-semibold text-white">
        Welcome, <%= current_user.first_name %>
      </span>
       

      <!-- Admin Dropdown: Visible only if the user is an admin -->
      <% if current_user.admin? %>
        <div class="dropdown mx-2">
          <button class="btn btn-primary dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Admin Options
          </button>
          <ul class="dropdown-menu">
            <%= link_to 'Add User +', new_user_registration_path, class: "dropdown-item" %>
            <%= link_to 'Roles', roles_path, class: "dropdown-item" %>
            <%= link_to 'Users', users_path, class: "dropdown-item" %>
            <%= link_to 'Categories', categories_path, class: "dropdown-item" %>
           <%= link_to 'Products', products_path, class: "dropdown-item" %>
           <%= link_to 'Stocks', product_stocks_path, class: "dropdown-item" %>
          </ul>
        </div>
      <% end %>
       <% if current_user.owner? %>
       <div class="dropdown mx-2">
          <button class="btn btn-primary dropdown-toggle fw-semibold" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Owner Options
          </button>
          <ul class="dropdown-menu">
            <%= link_to 'Add Product +', new_product_path, class: "dropdown-item" %>
            <%= link_to 'My Products', products_user_path(current_user), class: "dropdown-item" %>
            <%= link_to 'Stocks Transactions', product_stocks_path, class: "dropdown-item" %>  
          </ul>
        </div>
          
       <% end %>

      <!-- User Profile Dropdown -->
      <div class="dropdown mx-3 me-5">
        <button class="btn btn-primary fw-semibold dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          My Profile
        </button>
        <ul class="dropdown-menu">
          <li><%= link_to 'Profile', user_path(current_user), class: "dropdown-item"%></li>
          <li><%= link_to 'Edit Profile', edit_user_path(current_user), class: "dropdown-item"%></li>
          <li><%= link_to 'Logout', destroy_user_session_path, data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to log out?' }, class: "dropdown-item" %></li>
        </ul>
      </div>
    
    <% else %>
      <!-- If the user is not signed in, show sign-in and sign-up links -->
      <%= link_to 'Sign In', user_session_path, class: "mx-1 btn btn-primary" %>
      <%= link_to 'Sign Up', new_user_registration_path, class: "mx-1 btn btn-primary" %>
    <% end %>
    
  </div>
</nav>
